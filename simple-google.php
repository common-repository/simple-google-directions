<?php
require_once('../../../wp-blog-header.php');
header("HTTP/1.1 200 OK");
header("Content-type: text/javascript");
?>
// JavaScript Document
var directionDisplay,directionsService,map,myMarker,myLatlng,stepDisplay;var markerArray=[];function initialize(){directionsDisplay=new google.maps.DirectionsRenderer();directionsService=new google.maps.DirectionsService();directionsDisplay.setMap(map);stepDisplay=new google.maps.InfoWindow()}(function(){window.onload=loadScript;jQuery('#directions').submit(function(){if(jQuery.trim(jQuery('#address').val())!=''){jQuery('#address').val=jQuery.trim(jQuery('#address').val());calcRoute()}else{resetMap()}return false});jQuery('#resetOptions').click(function(){resetMap()})})(jQuery);function calcRoute(){var start=document.getElementById("address").value;var end=document.getElementById("sgdAddress").value;var request={origin:start,destination:end,travelMode:google.maps.DirectionsTravelMode.DRIVING};directionsService.route(request,function(response,status){if(status==google.maps.DirectionsStatus.OK){var warnings=document.getElementById("results");warnings.innerHTML=""+response.routes[0].warnings+"";showSteps(response)}})}function showSteps(directionResult){var tempOutput='';var myRoute=directionResult.routes[0].legs[0];var x=1;for(var i=0;i<myRoute.steps.length;i++){var tempText=myRoute.steps[i].instructions;tempText=tempText.replace('font-size:0.9em','');tempOutput+='<tr><td>'+x+'. '+tempText+'</td><td>'+myRoute.steps[i].distance.text+'</td><td>'+myRoute.steps[i].duration.text+'</td></tr>';x++}jQuery('#results').html('<h3><?php echo __('Directions Below', 'simple-google-directions'); ?></h3><table><thead><tr><th scope="col"><?php echo __('Instructions from', 'simple-google-directions'); ?> '+document.getElementById("address").value+'</th><th scope="col"><?php echo __('Distance', 'simple-google-directions'); ?></th><th scope="col"><?php echo __('Duration', 'simple-google-directions'); ?></th></tr></thead><tbody>'+tempOutput+'<tr><td colspan="3"><input type="button" value="<?php echo __('Print Directions', 'simple-google-directions'); ?>" onClick="PrintElem(\'#results\')" /></td></tr></tbody></table>')}function resetMap(){jQuery('#results').html('')}function PrintElem(elem){Popup(jQuery(elem).html())}function loadScript(){var script=document.createElement("script");script.type="text/javascript";script.src="http://maps.google.com/maps/api/js?sensor=false&callback=initialize&language=<?php echo $gLang;?>";document.body.appendChild(script)}function Popup(data){var mywindow=window.open('Driving Directions | <?php echo get_bloginfo('name'); ?> | Copyright <?php echo date('Y'); ?>','results','height=400,width=600');mywindow.document.write('<html><head><title>Driving Directions | <?php echo get_bloginfo('name'); ?></title>');mywindow.document.write('<link rel="stylesheet" href="<?php echo get_bloginfo('stylesheet_url'); ?>" type="text/css" />');mywindow.document.write('</head><body class="page-template-contact-php printpage">');mywindow.document.write('<div id="results">'+data+'</div>');mywindow.document.write('</body></html>');mywindow.document.close();mywindow.print();return true}
/******Simple Goolge Directions <?php echo SGD_VERSION; ?> Plugin******/